<!DOCTYPE html>
<html>
<head>
    <title>Results Page</title>
 <link rel="stylesheet" href="style1.css">
 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
 <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

</head>
<body>
    <div class="nav">
        <div><svg xmlns="http://www.w3.org/2000/svg" width="102" height="32" viewBox="0 0 102 32" fill="none">
            <path d="M29.24 22.6799C29.08 22.2899 28.93 21.8799 28.77 21.5299L28.03 19.8599L28 19.8299C25.8 15.0299 23.45 10.1499 20.96 5.34994L20.86 5.14994C20.61 4.67994 20.36 4.15994 20.1 3.67994C19.78 3.10994 19.47 2.49994 18.96 1.91994C18.4629 1.31308 17.8372 0.824133 17.1282 0.488399C16.4192 0.152666 15.6445 -0.0214844 14.86 -0.0214844C14.0755 -0.0214844 13.3008 0.152666 12.5918 0.488399C11.8828 0.824133 11.2571 1.31308 10.76 1.91994C10.29 2.49994 9.94 3.10994 9.62 3.67994C9.37 4.19994 9.12 4.70994 8.86 5.17994L8.76 5.37994C6.31 10.1799 3.92 15.0599 1.72 19.8599L1.66 19.9199C1.44 20.4399 1.18 20.9799 0.930001 21.5599C0.770001 21.9099 0.610001 22.2899 0.450001 22.7099C0.0180336 23.8097 -0.119907 25.0031 0.0497732 26.1724C0.219454 27.3418 0.690899 28.4467 1.41765 29.3784C2.14439 30.31 3.10136 31.0362 4.19423 31.4854C5.2871 31.9346 6.47815 32.0912 7.65 31.9399C8.77347 31.7921 9.85528 31.4178 10.83 30.8399C12.13 30.1099 13.38 29.0499 14.78 27.5199C16.18 29.0499 17.46 30.1099 18.73 30.8499C19.9513 31.5668 21.3344 31.9624 22.75 31.9999C24.3894 32.0068 25.9758 31.4202 27.2165 30.3487C28.4571 29.2771 29.2682 27.7928 29.5 26.1699C29.7678 25.0037 29.6772 23.7838 29.24 22.6699V22.6799ZM14.88 24.3399C13.16 22.1399 12.04 20.1199 11.66 18.3899C11.5026 17.7489 11.4686 17.0837 11.56 16.4299C11.63 15.9199 11.82 15.4699 12.08 15.0899C12.68 14.2199 13.73 13.6799 14.88 13.6799C15.4261 13.6633 15.9679 13.7824 16.4566 14.0268C16.9453 14.2711 17.3657 14.633 17.68 15.0799C17.94 15.4799 18.13 15.9199 18.19 16.4299C18.29 17.0099 18.25 17.6799 18.09 18.3899C17.71 20.0899 16.59 22.1299 14.88 24.3399ZM27.62 25.8199C27.5064 26.6439 27.1789 27.4237 26.67 28.0816C26.1612 28.7396 25.4889 29.2527 24.72 29.5699C23.96 29.8899 23.12 29.9799 22.3 29.8899C21.5 29.7899 20.7 29.5299 19.88 29.0499C18.5185 28.2084 17.2943 27.1629 16.25 25.9499C18.35 23.3499 19.62 20.9799 20.1 18.8699C20.33 17.8699 20.36 16.9699 20.26 16.1399C20.1351 15.3532 19.8418 14.6028 19.4 13.9399C18.8956 13.2212 18.2223 12.6374 17.4394 12.2398C16.6565 11.8423 15.7879 11.6431 14.91 11.6599C13.06 11.6599 11.41 12.5199 10.41 13.9299C9.95984 14.5911 9.66891 15.3475 9.56 16.1399C9.43 16.9799 9.46 17.9099 9.72 18.8699C10.2 20.9799 11.5 23.3799 13.57 25.9699C12.5435 27.2061 11.3164 28.2608 9.94 29.0899C9.11 29.5699 8.32 29.8199 7.52 29.9199C6.27589 30.0793 5.01915 29.7412 4.02296 28.9791C3.02677 28.2169 2.37165 27.0924 2.2 25.8499C2.1 25.0499 2.17 24.2499 2.49 23.3499C2.59 23.0299 2.74 22.7099 2.9 22.3299C3.12 21.8099 3.38 21.2699 3.63 20.7299L3.67 20.6599C5.83 15.8899 8.19 11.0199 10.64 6.24994L10.74 6.04994C10.99 5.56994 11.24 5.05994 11.5 4.57994C11.76 4.06994 12.04 3.57994 12.4 3.17994C12.7116 2.80797 13.101 2.50882 13.5407 2.30356C13.9804 2.09831 14.4597 1.99193 14.945 1.99193C15.4303 1.99193 15.9096 2.09831 16.3493 2.30356C16.789 2.50882 17.1784 2.80797 17.49 3.17994C17.84 3.57994 18.13 4.06994 18.39 4.57994C18.64 5.05994 18.89 5.57995 19.15 6.04994L19.25 6.24994C21.69 11.0199 24.05 15.8899 26.25 20.6599L26.28 20.6899C26.54 21.2099 26.76 21.7899 27.01 22.2899C27.17 22.6799 27.33 22.9899 27.43 23.3199C27.62 24.2199 27.72 25.0199 27.62 25.8199ZM41.54 24.1199C40.7865 24.131 40.0401 23.9722 39.3563 23.6554C38.6725 23.3386 38.0688 22.8719 37.59 22.2899C36.5141 21.0499 35.943 19.451 35.99 17.8099C35.9735 16.1332 36.563 14.5068 37.65 13.2299C38.1528 12.6406 38.7787 12.1686 39.4836 11.8472C40.1885 11.5259 40.9553 11.3629 41.73 11.3699C42.4589 11.35 43.181 11.5157 43.8282 11.8516C44.4755 12.1875 45.0267 12.6824 45.43 13.2899L45.53 11.7199H48.45V23.7999H45.52L45.42 22.0399C45.0042 22.6886 44.4294 23.2202 43.7503 23.5842C43.0713 23.9483 42.3104 24.1327 41.54 24.1199ZM42.3 21.2399C42.88 21.2399 43.39 21.0799 43.87 20.7899C44.31 20.4699 44.67 20.0499 44.95 19.5399C45.2 19.0299 45.33 18.4199 45.33 17.7399C45.369 17.1493 45.254 16.5587 44.9964 16.0259C44.7387 15.493 44.3471 15.0361 43.86 14.6999C43.3919 14.4083 42.8515 14.2537 42.3 14.2537C41.7485 14.2537 41.2081 14.4083 40.74 14.6999C40.3 15.0199 39.94 15.4399 39.66 15.9499C39.3956 16.5124 39.2655 17.1286 39.28 17.7499C39.241 18.3405 39.356 18.9312 39.6136 19.464C39.8713 19.9969 40.2629 20.4538 40.75 20.7899C41.22 21.0799 41.73 21.2399 42.3 21.2399ZM53.45 8.45994C53.45 8.80995 53.39 9.12994 53.23 9.38995C53.07 9.63995 52.85 9.86994 52.56 10.0299C52.27 10.1899 51.96 10.2499 51.64 10.2499C51.32 10.2499 51 10.1899 50.71 10.0299C50.4357 9.87726 50.2051 9.65694 50.04 9.38995C49.8851 9.10508 49.8092 8.78401 49.82 8.45994C49.82 8.09995 49.89 7.77994 50.04 7.52994C50.2 7.22994 50.43 7.04994 50.71 6.88994C51 6.72994 51.31 6.65994 51.64 6.65994C51.9583 6.65261 52.2731 6.728 52.5535 6.87874C52.834 7.02948 53.0705 7.25042 53.24 7.51994C53.3855 7.81149 53.4576 8.13418 53.45 8.45994ZM50.05 23.7599V11.6999H53.23V23.7799H50.04L50.05 23.7599ZM61.73 14.8599V14.8999C61.58 14.8299 61.38 14.7999 61.23 14.7699C61.03 14.7299 60.87 14.7299 60.68 14.7299C59.79 14.7299 59.12 14.9899 58.68 15.5299C58.2 16.0799 57.98 16.8499 57.98 17.8399V23.7699H54.79V11.6899H57.72L57.82 13.5199C58.14 12.8799 58.52 12.3999 59.06 12.0399C59.5971 11.6902 60.2295 11.5155 60.87 11.5399C61.1 11.5399 61.32 11.5599 61.51 11.5999C61.61 11.6299 61.67 11.6299 61.73 11.6599V14.8599ZM63.01 23.7599V6.73994H66.19V13.2399C66.64 12.6599 67.15 12.2099 67.79 11.8599C68.8032 11.3632 69.9542 11.2223 71.0573 11.4599C72.1604 11.6976 73.1513 12.3 73.87 13.1699C74.9483 14.4125 75.5195 16.0154 75.47 17.6599C75.4865 19.3367 74.897 20.9631 73.81 22.2399C73.3072 22.8293 72.6813 23.3013 71.9764 23.6227C71.2715 23.944 70.5047 24.1069 69.73 24.0999C69.0011 24.1199 68.279 23.9541 67.6318 23.6183C66.9845 23.2824 66.4333 22.7875 66.03 22.1799L65.93 23.7499L63.01 23.7799V23.7599ZM69.16 21.2399C69.73 21.2399 70.24 21.0799 70.72 20.7899C71.16 20.4699 71.52 20.0499 71.8 19.5399C72.06 19.0299 72.18 18.4199 72.18 17.7399C72.18 17.0699 72.06 16.4599 71.8 15.9499C71.5374 15.4582 71.1684 15.0312 70.72 14.6999C70.2519 14.4083 69.7115 14.2537 69.16 14.2537C68.6085 14.2537 68.0681 14.4083 67.6 14.6999C67.15 15.0199 66.8 15.4399 66.51 15.9499C66.2456 16.5124 66.1155 17.1286 66.13 17.7499C66.091 18.3405 66.206 18.9312 66.4636 19.464C66.7213 19.9969 67.1129 20.4538 67.6 20.7899C68.07 21.0799 68.58 21.2399 69.16 21.2399ZM76.67 23.7699V11.6899H79.6L79.7 13.2599C80.0682 12.6581 80.5905 12.1656 81.2129 11.8333C81.8352 11.501 82.5351 11.3411 83.24 11.3699C84.0461 11.356 84.8384 11.5801 85.5178 12.0141C86.1973 12.448 86.7337 13.0727 87.06 13.8099C87.41 14.5699 87.6 15.5099 87.6 16.5599V23.7999H84.41V16.9799C84.41 16.1399 84.22 15.4799 83.84 14.9899C83.46 14.5099 82.94 14.2499 82.28 14.2499C81.8 14.2499 81.38 14.3499 81.01 14.5699C80.66 14.7999 80.37 15.0899 80.15 15.4999C79.9276 15.9144 79.8173 16.3798 79.83 16.8499V23.7699H76.67ZM89.19 23.7699V6.72994H92.38V13.2299C92.8121 12.6467 93.3742 12.1722 94.0216 11.8441C94.6691 11.5161 95.3842 11.3434 96.11 11.3399C96.8635 11.3289 97.6099 11.4877 98.2937 11.8045C98.9775 12.1213 99.5812 12.588 100.06 13.1699C101.131 14.4125 101.698 16.0105 101.65 17.6499C101.667 19.3269 101.078 20.9536 99.99 22.2299C99.4872 22.8193 98.8613 23.2913 98.1564 23.6127C97.4515 23.934 96.6847 24.0969 95.91 24.0899C95.1811 24.1099 94.459 23.9441 93.8118 23.6083C93.1645 23.2724 92.6133 22.7775 92.21 22.1699L92.12 23.7399L89.19 23.7699ZM95.37 21.2399C95.95 21.2399 96.46 21.0799 96.93 20.7899C97.38 20.4699 97.73 20.0499 98.02 19.5399C98.27 19.0299 98.4 18.4199 98.4 17.7399C98.439 17.1493 98.324 16.5587 98.0664 16.0259C97.8087 15.493 97.4171 15.0361 96.93 14.6999C96.4619 14.4083 95.9215 14.2537 95.37 14.2537C94.8185 14.2537 94.2781 14.4083 93.81 14.6999C93.37 15.0199 93.01 15.4399 92.73 15.9499C92.4509 16.5074 92.32 17.1273 92.35 17.7499C92.311 18.3405 92.426 18.9312 92.6837 19.464C92.9413 19.9969 93.3329 20.4538 93.82 20.7899C94.29 21.0799 94.77 21.2399 95.37 21.2399Z" fill="#DE3151"/>
          </svg></div>
        <div class="search">
            <div class="b"><input  id="locationInput" type="text" placeholder="Bordeaux" ></div>
            <div class="f"><input id="dateInput" type="text" placeholder="Feb 19-26" ></div>
            <div><input type="text" id="guestsInput" placeholder="2 guests"></div>
            <div><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M16.0417 16.0416L12.9167 12.9166M3.95834 9.16658C3.95834 6.2901 6.29019 3.95825 9.16668 3.95825C12.0432 3.95825 14.375 6.2901 14.375 9.16658C14.375 12.0431 12.0432 14.3749 9.16668 14.3749C6.29019 14.3749 3.95834 12.0431 3.95834 9.16658Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg></div>
        </div>
        <div class="profile">
            <div class="host">Become a Host</div>
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M19.25 12C19.25 16.0041 16.0041 19.25 12 19.25C7.99594 19.25 4.75 16.0041 4.75 12C4.75 7.99594 7.99594 4.75 12 4.75C16.0041 4.75 19.25 7.99594 19.25 12Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M15.25 12C15.25 16.5 13.2426 19.25 12 19.25C10.7574 19.25 8.75 16.5 8.75 12C8.75 7.5 10.7574 4.75 12 4.75C13.2426 4.75 15.25 7.5 15.25 12Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M5 12H19" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
            </div>
            <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M19.25 12C19.25 16.0041 16.0041 19.25 12 19.25C7.99594 19.25 4.75 16.0041 4.75 12C4.75 7.99594 7.99594 4.75 12 4.75C16.0041 4.75 19.25 7.99594 19.25 12Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M15.25 12C15.25 16.5 13.2426 19.25 12 19.25C10.7574 19.25 8.75 16.5 8.75 12C8.75 7.5 10.7574 4.75 12 4.75C13.2426 4.75 15.25 7.5 15.25 12Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M5 12H19" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg></div>
           
            <div class="btn"><button><div>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M4.75 5.75H19.25" stroke="#111827" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4.75 18.25H19.25" stroke="#111827" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4.75 12H19.25" stroke="#111827" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
            </div>
           <div>   <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
            <mask id="mask0_3123_751" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="32" height="32">
              <circle cx="16" cy="16" r="16" fill="#F3F4F6"/>
            </mask>
            <g mask="url(#mask0_3123_751)">
              <path d="M32 27.9918V32.0012H0V28.0065C1.86127 25.5191 4.27721 23.5003 7.05572 22.1106C9.83423 20.7209 12.8987 19.9986 16.0053 20.0012C22.544 20.0012 28.352 23.1398 32 27.9918ZM21.336 11.9998C21.336 13.4143 20.7741 14.7709 19.7739 15.7711C18.7737 16.7713 17.4172 17.3332 16.0027 17.3332C14.5882 17.3332 13.2316 16.7713 12.2314 15.7711C11.2312 14.7709 10.6693 13.4143 10.6693 11.9998C10.6693 10.5853 11.2312 9.22879 12.2314 8.2286C13.2316 7.22841 14.5882 6.6665 16.0027 6.6665C17.4172 6.6665 18.7737 7.22841 19.7739 8.2286C20.7741 9.22879 21.336 10.5853 21.336 11.9998Z" fill="#D1D5DB"/>
            </g>
          </svg></div></button></div>
          </div>
    </div>
    <div class="filters">
        <div class="price"><div>Price </div><div><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M12.7083 8.95825L10 11.8749L7.29167 8.95825" stroke="#374151" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg></div></div>
          <div class="place"><div>Type of place</div><div><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M12.7083 8.95825L9.99999 11.8749L7.29166 8.95825" stroke="#374151" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg></div></div>
        <div>Free cancelation</div>
        <div>WiFi</div>
        <div>Kitchen</div>
        <div>Air conditioning</div>
        <div>Washer</div>
        <div>Iron</div>
        <div>Dedicated workspace</div>
        <div>Free parking</div>
        <div>Dryer</div>
        <div class="filter"><div><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M3.95837 6.66675H6.04171" stroke="#374151" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M10.625 6.66675H16.0417" stroke="#374151" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M3.95837 13.3333H10.2084" stroke="#141414" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M14.7916 13.3333H16.0416" stroke="#141414" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M10.2084 6.66675C10.2084 7.70228 9.36891 8.54175 8.33337 8.54175C7.29784 8.54175 6.45837 7.70228 6.45837 6.66675C6.45837 5.63121 7.29784 4.79175 8.33337 4.79175C9.36891 4.79175 10.2084 5.63121 10.2084 6.66675Z" stroke="#141414" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M14.375 13.3333C14.375 14.3688 13.5355 15.2083 12.5 15.2083C11.4645 15.2083 10.625 14.3688 10.625 13.3333C10.625 12.2977 11.4645 11.4583 12.5 11.4583C13.5355 11.4583 14.375 12.2977 14.375 13.3333Z" stroke="#141414" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg> </div><div>Filters</div></div>
    </div>
    <div class="main">
    <div id="resultsContainer" class="main-1">
       
        <hr>
        <!-- This is where the results will be displayed -->
    </div>
    <div class="map" id="map">

    </div>
    </div>

    <script>
        // Function to extract query parameters from the URL
        function getQueryParams() {
            const queryParams = new URLSearchParams(window.location.search);
            const locationValue = queryParams.get("location");
            const checkInValue = queryParams.get("checkin");
            const checkOutValue = queryParams.get("checkout");

            // Create the URL to fetch data based on the user's search criteria
            const apiUrl = `https://airbnb13.p.rapidapi.com/search-location?location=${locationValue}&checkin=${checkInValue}&checkout=${checkOutValue}&adults=1&children=0&infants=0&pets=0&page=1&currency=USD`;

            // Make a fetch request to the API
            fetch(apiUrl, {
                method: 'GET',
                headers: {
    'X-RapidAPI-Key': '8d321eef1amshf4e903d4564669fp1e3ce6jsnfd5763ab5345',
    'X-RapidAPI-Host': 'airbnb13.p.rapidapi.com'
  }
            })
            .then(response => response.json())
            .then(data => {
                if (data && data.results && Array.isArray(data.results)) {
                    // Handle the API response data and display it on the page
               
                    const locationInput = document.getElementById("locationInput");
                    const dateInput = document.getElementById("dateInput");
                    const guestsInput = document.getElementById("guestsInput");


// Update the placeholder with the fetched locationValue
locationInput.placeholder = `${locationValue}`;
dateInput.placeholder=`${checkInValue}`;
                    const mainContainer = document.querySelector('.main-1');
                    const locationHeading = document.createElement('div');
                    locationHeading.className='n-stay';
    locationHeading.textContent = `200+ stays in ${locationValue}`;
    mainContainer.appendChild(locationHeading);
    const map = L.map('map');
                const markers = L.layerGroup();

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    maxZoom: 19,
                    attribution: 'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);

                // Initialize map bounds
                const mapBounds = [];
                    // Loop through the results and create a card for each property
                  

                    data.results.forEach(property => {
                      

                   const cardElement = document.createElement('div');
  cardElement.className = 'cards';
 


                        // Display property information (you can customize this)
                        cardElement.innerHTML = `


                <div class="img" style="background-size: cover;background-image: url(${property.images[0]});height:200px;width:600px;border-radius:24px;"></div>
                <div class="img-content">
                    <div class="contains-heart">
                        <div class="text">
                           <div class="home">Entire Home in ${locationValue}</div>
                           <div class="name">${property.name}</div> 
                        </div>
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M15.9934 9.64436C14.0607 7.48008 10.8377 6.8979 8.41618 8.87972C5.99464 10.8616 5.65372 14.1751 7.55537 16.519L15.9934 24.3334L24.4313 16.519C26.333 14.1751 26.0337 10.8407 23.5705 8.87972C21.1074 6.91874 17.9261 7.48008 15.9934 9.64436Z" stroke="#374151" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                              </svg>
                        </div>
                    </div>
                    <div class="line"></div>
                    <div class="list">
                        <ul>
                            <li>${property.persons}guests</li>
                            <li>${property.type}</li>
                            <li>${property.bedrooms} beds</li>
                            <li>${property.bathrooms} bath</li>
                          
                        </ul>
                    </div>
                    <div class="list l1">
                        <ul>
                            <li>${property.previewAmenities[0]}</li>
                            <li>Kitchen</li>
                            <li>Free parking</li>
                           
                          
                        </ul>
                    </div>
                    <div class="line"></div>
                    <div class="review">
                        <div class="r-scale">
                            <div>${property.rating}</div>
                            <div><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M10 3.95837L11.4583 8.54171H16.0417L12.2917 11.4584L13.5417 16.0417L10 13.125L6.45834 16.0417L7.70834 11.4584L3.95834 8.54171H8.54168L10 3.95837Z" fill="#FCD34D" stroke="#F59E0B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                              </svg></div>
                            <div>(${property.reviewsCount} reviews)</div>
                        </div>
                        <div><b>${property.price.currency} ${property.price.rate}</b> /night</div>
                    </div>
                  <div class="breakdown-button" style="display:flex; justify-content:center; align-items:center;  width:300px; border-radius:12px; padding:3px;background-color:gray;border:1px solid red;">price-breakdown</div>
                  <div class="directions" style="text-decoration:underline;">Get Directions</div>
                  </div>
       
            
           
  `;

  const directionsButton = cardElement.querySelector('.directions');
        directionsButton.addEventListener("click", function() {
            openDirections(property.lat, property.lng);
        });





  // Append the card to the main container
// Append the card to the main container


let imagesArray = [];
imagesArray = property.images;
const modal = document.createElement('div');
modal.className = 'modal';
modal.style.display = 'none'; // Initially hide the modal
document.body.appendChild(modal);
document.addEventListener('click', (event) => {
    if (event.target.closest('.cards')) {
        // If a card element is clicked (except "breakdown-button"), navigate to index2.html
        if (!event.target.classList.contains('breakdown-button')) {
            const cardElement = event.target.closest('.cards');
    const cardDetails = {
        id: property.id,
        title: property.name,
        amenityIds: property.amenityIds,
        currency: property.price.rate,
        images: imagesArray, // Include the fetched array of image URLs
        bedrooms:property.bedrooms,
        beds:property.beds,
        bathrooms:property.bathrooms,
        type:property.type,
        rating:property.rating,
        address:property.address,
        reviews:property.reviewsCount,
        lat:property.lat,
        lng:property.lng,
        // Add other properties you want to pass
    };

  
// Loop through the card details and add markers for each card

    // Convert the card details to a JSON string and encode it
    const cardDetailsJson = encodeURIComponent(JSON.stringify(cardDetails));

    // Redirect to "index2.html" with the card details as a query parameter
    window.location.href = `index2.html?cardDetails=${cardDetailsJson}`;
}
  
}
});


document.addEventListener('click', (event) => {
    
            // Check if the clicked element is the "price-breakdown" button
            const breakdownButton = cardElement.querySelector('.breakdown-button');
            if (breakdownButton === event.target) {
                // Show the modal and populate its content with property details
                modal.style.display = 'block';
                modal.innerHTML = `
                    <div class="modal-content">
                        <h2>Breakdown Cost</h2>
                        <p>Title: ${property.name}</p>
    <p>Base Rate: ${property.price.currency} ${property.price.rate}</p>
    <p>Total Fees: ${property.price.currency} ${property.price.total}</p>
                        <button id="closeModal">Close</button>
                    </div>
                `;

                // Add a click event listener to the modal's "Close" button
                const closeModalButton = modal.querySelector('#closeModal');
                closeModalButton.addEventListener('click', () => {
                    // Close the modal when the "Close" button is clicked
                    modal.style.display = 'none';
                });
            }
      
});











  mainContainer.appendChild(cardElement);
  const lat = parseFloat(property.lat);
                    const lng = parseFloat(property.lng);

                    if (!isNaN(lat) && !isNaN(lng)) {
                        // Add a marker to the map if latitude and longitude are valid
                        const marker = L.marker([lat, lng]).addTo(markers);
                        marker.bindPopup(property.name);

                        // Add the marker's coordinates to the map bounds
                        mapBounds.push([lat, lng]);
                    }
                    });
                    map.fitBounds(mapBounds);

// Add the markers layer to the map
markers.addTo(map);

                } else {
                    console.error("API response is not in the expected format.");
                }
            })
            .catch(error => {
                console.error(error);
            });
        }

        // Call the function to fetch and display data


        function openDirections(latitude, longitude) {
        const url = `https://www.google.com/maps/dir//${latitude},${longitude}`;
        window.open(url, "_blank");
    }
        getQueryParams();
       

   
       
 
</script>


    
</body>

</html>